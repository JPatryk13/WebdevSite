{% extends "base.html" %}

{% block content %}

{% if go_to_contact %}
  <script>
    // If the form in contact section was previously filled up and submitted,
    // the script will take the user to the contact section
    window.location.hash = '#contact';
  </script>
{% endif %}


<!-- Home -->
{% block home %}{% include "sections/home.html" %}{% endblock %}


<!-- Services -->
{% block services %}{% include "sections/services.html" %}{% endblock %}


<!-- Projects -->
{% block projects %}{% include "sections/projects.html" %}{% endblock %}


<!-- Contact -->
{% block contact %}{% include "sections/contact.html" %}{% endblock %}


<script type="text/javascript">
  // Load elemnts one by one on the main page
  window.addEventListener('load', function () {
    const sectionYRange = getSectionHeights();
    const { elements, elementsYRange } = elementsPositionOnThePage(sectionYRange);
    const { viewportTop, viewportBottom } = getViewportPosition(sectionYRange);
    loadElement(viewportTop, viewportBottom, elementsYRange, elements);
  }, false);

  window.addEventListener('scroll', function () {
    const sectionYRange = getSectionHeights();
    const { elements, elementsYRange } = elementsPositionOnThePage(sectionYRange);
    const { viewportTop, viewportBottom } = getViewportPosition(sectionYRange);
    loadElement(viewportTop, viewportBottom, elementsYRange, elements);

    let desktopMenuItems = document.querySelectorAll('#desktopMenu.navbar-menu .navbar-start .navbar-item');
    let mobileMenuItems = document.querySelectorAll('#mobileMenu.navbar-menu .navbar-start .navbar-item');
    addActiveClassAtIndex(desktopMenuItems);
    addActiveClassAtIndex(mobileMenuItems);
  }, false);
</script>

{% endblock %}
